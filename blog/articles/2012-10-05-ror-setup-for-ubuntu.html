<!DOCTYPE html><html><head><title>Marten Klitzke</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1" name="viewport" /><link color="#555555" href="/favicon-fa5e2576.svg" rel="mask-icon" /><link href="/favicon-b2e8bcaa.png" rel="shortcut icon" type="image/png" /><link href="/blog/feed.xml" rel="alternate" title="Marten's Blog Feed" type="application/atom+xml" /><!--[if lte IE 8]
= javascript_include_tag  "html5shiv"--><link href="../../stylesheets/main-2037b4d3.css" rel="stylesheet" /><!--[if lte IE 9]
= stylesheet_link_tag "ie9"--><!--[if lte IE 8]
= stylesheet_link_tag "ie8"--><noscript><link href="../../stylesheets/noscript-71dc0972.css" rel="stylesheet" /></noscript></head><body class="is-loading"><div id="wrapper"><section class="article" id="blog"><header><h1><a href="/blog/articles/2012-10-05-ror-setup-for-ubuntu.html">RoR Setup for Ubuntu</a><time>October 05, 2012</time></h1><a class="back fa fa-angle-left" href="/blog">Back</a></header><article id="content"><p>This Blogpost gives you a slim checklist for your Ruby on Rails Setup for Ubuntu.</p>

<h2>Install Ubuntu</h2>

<p>First we need a fresh Ubuntu Server minimal installation with openSSH, curl and git.
Select openSSH in the ubuntu setup and install curl and git with apt-get.</p>
<pre class="highlight shell"><code>sudo apt-get install curl git
</code></pre>

<h2>Public Keys</h2>

<p>To make things easier you should add your public key to an authorized_keys file on your fresh installed ubuntu.
Your public key should be in your .ssh folder</p>
<pre class="highlight shell"><code>~.ssh/id_rsa.pub
</code></pre>

<p>If you dont have a public key you can generate one by typing</p>
<pre class="highlight shell"><code>ssh-keygen -t rsa
</code></pre>

<p>Append your public key in this file</p>
<pre class="highlight shell"><code>~.ssh/authorized_keys
</code></pre>

<p>Now you can login to your server without a password.</p>

<h2>New User</h2>

<p>We start your setup by creating a new user for your project</p>
<pre class="highlight shell"><code>sudo adduser <span class="k">*</span>username<span class="k">*</span>
</code></pre>

<p><strong>Dont forget to add a save password!</strong></p>

<p>Now switch to your new user</p>
<pre class="highlight shell"><code>su <span class="k">*</span>username<span class="k">*</span>
</code></pre>

<p>and add your public key to this users authorized_keys file</p>

<h2>Install Requirements and Ruby</h2>

<p>For <strong>Ruby</strong> on Rails you obviously need Ruby ;) so lets install RVM (Ruby Version Manager) first</p>
<pre class="highlight shell"><code>curl -L https://get.rvm.io | bash -s stable
</code></pre>

<p>to get rvm in your current shell type</p>
<pre class="highlight shell"><code><span class="nb">source</span> ~/.rvm/scripts/rvm
</code></pre>

<p>now you should check the requirements for rvm with</p>
<pre class="highlight shell"><code>rvm requirements
</code></pre>

<p>install all of the needed requirements on your administrator or root user with</p>
<pre class="highlight shell"><code><span class="c"># switch user</span>
su administrator
sudo apt-get install <span class="k">*</span>
</code></pre>

<p>Along with this step you should install some other requirements based on your Rails app:</p>

<p>Nginx, nodejs and supervisor</p>
<pre class="highlight shell"><code>sudo apt-get install nginx nodejs supervisor
</code></pre>

<p>MySql (optional, depends on your setup)</p>
<pre class="highlight shell"><code>sudo apt-get install mysql-server libmysql-ruby libmysqlclient-dev
</code></pre>

<p>ImageMagick (optional, for image resizing and more)</p>
<pre class="highlight shell"><code>sudo apt-get install imagemagick libmagickwand-dev
</code></pre>

<p><em>But we wanted to install Ruby?</em> yes! back to your new user :)</p>
<pre class="highlight shell"><code>su <span class="k">*</span>username<span class="k">*</span>
</code></pre>

<p>if you need openssl install the package</p>
<pre class="highlight shell"><code>rvm pkg install openssl
</code></pre>

<p>and then the <em>latest</em> Ruby</p>
<pre class="highlight shell"><code>rvm install 1.9.3 --with-openssl-dir<span class="o">=</span><span class="nv">$rvm_path</span>/usr
</code></pre>

<p>or just install the <em>latest</em> Ruby</p>
<pre class="highlight shell"><code>rvm install 1.9.3
</code></pre>

<p>want to make your new Ruby version default your defualt ruby?</p>
<pre class="highlight shell"><code>rvm use 1.9.3 --default
</code></pre>

<h2>First Deploy</h2>

<p>Now your server is basicly ready for your first deployment.</p>

<p>I will not describe how you should setup <a href="https://github.com/capistrano/capistrano/wiki">capistrano</a> or <a href="http://nadarei.co/mina/">mina</a>, but you can read their documentation add the given links.</p>

<p>To setup supervisor for your Rails App you should checkout Raphael Randschaus Blogpost about <a href="https://github.com/nicolai86/nicolai86.github.com/blob/master/_posts/2012-02-25-foreman-and-supervisord.md">foreman and supervisord</a></p>
</article><hr /><div id="disqus_thread"></div><script>/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'mortikde'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the<a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a class="dsq-brlink" href="http://disqus.com">comments powered by<span class="logo-disqus">Disqus</span></a></section><footer id="footer"><ul class="copyright"><li><a href="mailto:me@mortik.xyz" target="_blank">&copy; Marten Klitzke</a></li><li><a href="/">Home</a></li><li><a href="/imprint">Imprint</a></li><li><a class="fa fa-rss" href="/blog/feed.xml" target="_blank"></a></li></ul></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-41009535-1', 'mortik.de');
ga('send', 'pageview');</script></div><!--[if lte IE 8]
= javascript_include_tag  "respond.min"--><script>if ('addEventListener' in window) {
  window.addEventListener('load', function() { document.body.className = document.body.className.replace(/\bis-loading\b/, ''); });
  document.body.className += (navigator.userAgent.match(/(MSIE|rv:11\.0)/) ? ' is-ie' : '');
}</script></body></html>